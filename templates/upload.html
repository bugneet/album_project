{% extends 'base.html' %}

{% block content %}

<header>
 {% include 'header.html' %}
</header>

<main>
 {% block main %}

    <section class="photo-upload">
      <h2>나의 사진 업로드</h2>
      <p>사진을 업로드하고 분석 결과를 확인하세요.</p>

      <form action="/upload/" method="post" enctype="multipart/form-data">

        <div class="input-group">
          <input type="file" name="photo" class="form-control" accept="image/jpeg,image/png">
          <button type="submit" class="btn btn-primary">업로드</button>
        </div>

        <div class="form-group">
          <label for="title">사진 제목</label>
          <input type="text" id="title" name="title" class="form-control" placeholder="사진 제목">
        </div>

        <div class="form-group">
          <label for="description">사진 설명</label>
          <input type="text" id="description" name="description" class="form-control" placeholder="사진 설명">
        </div>

      </form>

    </section>

    <section class="analysis-results">
      <h2>분석 결과</h2>
      <p>사진 업로드 후 확인할 수 있는 분석 결과입니다.</p>
      <ul>
        {% for photo in photos %}
          <li>
            <img src="{{ photo.image.url }}" alt="{{ photo.title }}" style="width: 200px;">
            <div class="photo-info">
              <h4>{{ photo.analysis_result.title }}</h4>
              <p>{{ photo.analysis_result.description }}</p>
              <a href="{% url 'delete-photo' photo.id %}">삭제</a>
            </div>
          </li>
        {% endfor %}
      </ul>
    </section>
  {% endblock %}
</main>

<footer>
  {% include 'footer.html' %}
</footer>
